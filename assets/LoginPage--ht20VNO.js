import{G as T,r as o,a as k,g as F,b as N,u as w,l as R,d as z,j as e,F as Z,L as A,M as D,S as P,e as j,I as C,f as W,m as S,R as G,h as U,s as $,o as Y,n as q,k as J}from"./index-CBh11IS_.js";import{I as K}from"./index-BV2Qb9GN.js";import{u as O,B as Q}from"./user.model-CEHiywEg.js";import{z as V,a as X}from"./zodLang-DW9vGaqK.js";function ee(t){return T({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M13 6H11V7C11 7.55228 11.4477 8 12 8C12.5523 8 13 7.55228 13 7V6Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2V4H7V7C7 9.76142 9.23858 12 12 12C9.23858 12 7 14.2386 7 17V20H6V22H18V20H17V17C17 14.2386 14.7614 12 12 12C14.7614 12 17 9.76142 17 7V4H18V2H6ZM9 4H15V7C15 8.65685 13.6569 10 12 10C10.3431 10 9 8.65685 9 7V4ZM9 17V20H15V17C15 15.3431 13.6569 14 12 14C10.3431 14 9 15.3431 9 17Z",fill:"currentColor"},child:[]}]})(t)}const se=()=>{const[t,d]=o.useState(V),n=k(F);return o.useEffect(()=>{d(n==="english"?V:X)},[n]),{loginSchema:O(t).pick({email:!0,password:!0})}},ae=()=>{const d=N(),[n,h]=o.useState(!1),[i,y]=o.useState(null),[a,g]=o.useState(25),s=w(),{user:u}=R(),{loginSchema:L}=se(),{register:x,handleSubmit:b,formState:E,reset:M,setError:I}=z({defaultValues:{email:(u==null?void 0:u.email)||"",password:""},mode:"all",resolver:$(L)}),{errors:r,isDirty:v,isValid:H,isSubmitting:m}=E;o.useEffect(()=>{a>0&&i?setTimeout(()=>{g(p=>p-1)},1e3):a===0&&(y(null),setTimeout(()=>g(25),1e3))},[i,a]);const f=()=>{},_=p=>{d(Y(p)).then(l=>{if(l.type==="auth/login/rejected"){const c=l.payload,B=s[c]||c;I("password",{type:"manual",message:B})}if(l.type==="auth/login/fulfilled"&&M(),l.payload.success){const c=l.payload.user.name||"Dude";q.Notify.success(`${s.welcome}, ${J(c)}`)}})};return e.jsxs(Z,{children:[e.jsx(A,{children:e.jsx(K,{size:50})}),e.jsxs(D,{children:[s.logBtn," ",i?e.jsx(ee,{}):""]}),e.jsxs(P,{autoComplete:"off",noValidate:!0,onSubmit:b(_),children:[e.jsxs(j,{children:[s.email,e.jsx(C,{...x("email",{onChange:f}),placeholder:m?"Processing":s.phEmail})]}),r.email&&e.jsx("div",{className:"text-purple-900",children:r.email.message}),e.jsxs(j,{className:"pass__label",children:[s.pass,e.jsx(C,{...x("password",{onChange:f}),placeholder:m?"Processing":"••••",type:n?"text":"password"}),e.jsx(W,{type:"button",onClick:()=>h(!n),children:n?s.hide:s.show})]}),r.password&&e.jsx("div",{className:"text-purple-900",children:r.password.message}),e.jsx(Q,{type:"submit",disabled:!a||m||!v||!H,children:a?s.logBtn:s.try}),i?e.jsxs(S,{children:[a,s.left]}):!a&&e.jsx(S,{children:s.wasted})]}),e.jsxs(G,{children:[e.jsxs("p",{children:[" ",s.notYet," "]}),e.jsx(U,{to:"/signup",children:s.regBtn})]})]})},ie=()=>{const t=w();return e.jsx("div",{className:"login__bg ",children:e.jsxs("div",{className:"login__wrap",children:[e.jsx("div",{children:e.jsx("title",{children:t.logBtn})}),e.jsx(ae,{})]})})};export{ie as default};
